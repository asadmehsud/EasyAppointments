@model EasyAppointments.Services.DTOs.DoctorDTOs.DoctorDto
@{
    ViewData["Title"] = "Index";
    Layout = "~/Areas/Doctor/Views/Shared/_DoctorLayout.cshtml";
}

<div class="container-fluid">

    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="account-content">
                <h2>Doctor Registration</h2>   <p>Please register yourself and enter the information by selecting category...</p><br /><br />

                <div class="tabs" style="margin-bottom:50px;margin-top:-40px;">
                    <button class="tab-active" style="border:none;background-color:dodgerblue;color:ButtonFace" id="btnPersonalInformation" onclick="loadPersonalInformation()">Personal Information</button>
                    <button class="tab" style="border:none;background-color:dodgerblue;color:ButtonFace" id="btnLocationInformation" onclick="loadLocationDetails()">Location Details</button>
                    <button class="tab" style="border:none;background-color:dodgerblue;color:ButtonFace" id="btnSpecialityInformation" onclick="loadSpecialitiesDetails()">Speciality Details</button>
                </div>
                <div class="col-lg-12" id="mainDiv">

                    @* Main Div *@
                </div>
            </div>
        </div>
    </div>
    @section LoadFiles {
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Dropify/0.2.2/js/dropify.min.js" integrity="sha512-8QFTrG0oeOiyWo/VM9Y8kgxdlCryqhIxVeRpWSezdRRAvarxVtwLnGroJgnVW9/XBRduxO/z1GblzPrMQoeuew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>

            function showConfirmationDialog(action, Id) {
                Swal.fire({
                    title: `Confirmation`,
                    text: 'Are you sure?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes, proceed!',
                    cancelButtonText: 'Cancel'
                }).then((result) => {
                    if (result.isConfirmed) {
                        if (action === 'Submittion') {
                            saveDoctor();
                        } else if (action === 'Deletion') {
                            deleteSpeciality(Id);
                        }
                    }
                });
            }
            function saveDoctor() {
                debugger;
                if ($("#FrmDoctor").valid()) {
                    var frmData = new FormData(document.getElementById('FrmDoctor'));
                    $.ajax({
                        type: 'post',
                        url: '/Doctor/Doctor/Save',
                        processData: false,
                        contentType: false,
                        data: frmData,
                        success: function (result) {
                            debugger;
                            if (result == true) {
                                Swal.fire(
                                    'Success!',
                                    `Operation successfull.`,
                                    'success'
                                );
                            }
                           else{
                               Swal.fire(
                                   'Error!',
                                   'Error Submitting Form.',
                                   'Error'
                               );
                           }
                        }
                    });
                }

            }
            function loadPersonalInformation() {
                $("#btnPersonalInformation").css('background-color', 'transparent',);
                $("#btnPersonalInformation").css('color', 'black',);
                $("#btnLocationInformation").css('background-color', 'dodgerblue');
                $("#btnSpecialityInformation").css('background-color', 'dodgerblue');
                debugger;
                $.ajax({
                    type: 'Get',
                    url: '/Doctor/Doctor/LoadPersonalInformation',
                    success: function (Result) {
                        $("#mainDiv").html(Result);
                        $("#Image").dropify();
                    }
                });
            }
            function loadLocationDetails() {
                $("#btnLocationInformation").css('background-color', 'transparent');
                $("#btnLocationInformation").css('color', 'black');
                $("#btnPersonalInformation").css('background-color', 'dodgerblue');
                $("#btnSpecialityInformation").css('background-color', 'dodgerblue');
                debugger;
                $.ajax({
                    type: 'Get',
                    url: '/Doctor/Doctor/LoadLocationDetails',
                    success: function (Result) {
                        $("#mainDiv").html(Result);
                    }
                });
            }
            function loadSpecialitiesDetails() {
                $("#btnSpecialityInformation").css('background-color', 'transparent');
                $("#btnSpecialityInformation").css('color', 'black');
                $("#btnLocationInformation").css('background-color', 'dodgerblue');
                $("#btnPersonalInformation").css('background-color', 'dodgerblue')
                debugger;
                $.ajax({
                    type: 'Get',
                    url: '/Doctor/Doctor/LoadSpecialitiesDetails',
                    success: function (Result) {
                        $("#mainDiv").html(Result);
                        $("#Qualifications").dropify();
                    }
                });
            }

            function getCityByProvince() {
                debugger;
                var province = $("#Province").val();
                $.ajax({
                    type: 'post',
                    url: '/Doctor/Doctor/GetCityByProvince',
                    data: { ProvinceId: province },
                    success: function (result) {
                        debugger;
                        $("#City").html(result);
                    }
                });
            }

            function getMedCenterByCity() {
                debugger;
                var city = $("#City").val();
                $.ajax({
                    type: 'post',
                    url: '/Doctor/Doctor/GetMedCenterByCity',
                    data: { CityId: city },
                    success: function (result) {
                        debugger;
                        $("#MedicalCenter").html(result);
                    }
                });
            }

        </script>
    }
</div>

